--[[
 .____                  ________ ___.    _____                           __                
 |    |    __ _______   \_____  \\_ |___/ ____\_ __  ______ ____ _____ _/  |_  ___________ 
 |    |   |  |  \__  \   /   |   \| __ \   __\  |  \/  ___// ___\\__  \\   __\/  _ \_  __ \
 |    |___|  |  // __ \_/    |    \ \_\ \  | |  |  /\___ \\  \___ / __ \|  | (  <_> )  | \/
 |_______ \____/(____  /\_______  /___  /__| |____//____  >\___  >____  /__|  \____/|__|   
         \/          \/         \/    \/                \/     \/     \/                   
          \_Welcome to LuaObfuscator.com   (Alpha 0.2.5) ~  Much Love, Ferib 

]]--

require("prefabutil");local v0={Asset("ANIM","anim/wixie_wardrobe.zip")};local v1={"collapse_big"};local function v2(v3)v3.AnimState:PlayAnimation("active");v3.AnimState:PushAnimation("closed",false);v3.SoundEmitter:PlaySound("dontstarve/common/wardrobe_active");end local function v4(v3,v5)if  not v3.AnimState:IsCurrentAnimation("active") then v3.AnimState:PlayAnimation("hit");v3.AnimState:PushAnimation("closed",false);v3.SoundEmitter:PlaySound("dontstarve/common/wardrobe_hit");end v3.components.activatable.inactive=true;end local function v6(v3,v5)v3.AnimState:PlayAnimation("active");v3.AnimState:PushAnimation("closed",false);v3.SoundEmitter:PlaySound("dontstarve/common/wardrobe_active");v3.Light:Enable(true);v3:DoTaskInTime(20 * FRAMES ,function()local v26=SpawnPrefab("shadow_wixie");v26:AddTag("puzzlespawn");v26.Transform:SetPosition(v3.Transform:GetWorldPosition());end);end local function v7(v3)return "OPEN";end local v8={N=135,NE=180,E= -135,SE= -90,S= -45,SW=0,W=45,NW=90};local function v9(v3,v10)if (v10~=nil) then local v27,v28,v29=v10.Transform:GetWorldPosition();local v30=v3:GetAngleToPoint(v27,v28,v29);local v31,v32=nil,nil;for v33,v34 in pairs(v8) do local v35=math.abs(anglediff(v30,v34));if ( not v31 or (v35<v32)) then v31,v32=v33,v35;end end return v31;else return nil;end end local function v11(v3)local v14=TheSim:FindFirstEntityWithTag("custom_beequeenhive_tag");local v15=TheSim:FindFirstEntityWithTag("widowweb");local v16=TheSim:FindFirstEntityWithTag("custom_oasis_tag");v3.beequeen=v9(v3,v14);v3.widowspawner=v9(v3,v15);v3.oasis=v9(v3,v16);if ((v3.beequeen==nil) or (v3.widowspawner==nil) or (v3.oasis==nil)) then v3:DoTaskInTime(5,v11);end end local function v12()local v20=CreateEntity();v20.entity:AddTransform();v20.entity:AddAnimState();v20.entity:AddLight();v20.entity:AddSoundEmitter();v20.entity:AddMiniMapEntity();v20.entity:AddNetwork();v20:SetPhysicsRadiusOverride(0.8);MakeObstaclePhysics(v20,v20.physicsradiusoverride);v20:AddTag("wixie_wardrobe");v20.Light:SetRadius(15);v20.Light:SetFalloff(0.9);v20.Light:SetIntensity(0.65);v20.Light:SetColour(200/255 ,140/255 ,140/255 );v20.Light:Enable(false);v20.AnimState:SetBank("wardrobe");v20.AnimState:SetBuild("wixie_wardrobe");v20.AnimState:PlayAnimation("closed");v20.MiniMapEntity:SetIcon("wardrobe.png");MakeSnowCoveredPristine(v20);v20.entity:SetPristine();if  not TheWorld.ismastersim then return v20;end v20:AddComponent("activatable");v20.components.activatable.OnActivate=v4;v20.components.activatable.inactive=true;v20.components.activatable.quickaction=true;v20.components.activatable.standingaction=true;v20.GetActivateVerb=v7;v20:AddComponent("inspectable");v20:AddComponent("lootdropper");MakeSnowCovered(v20);v20:ListenForEvent("wixie_wardrobe_shutter",v4);v20:ListenForEvent("wixie_wardrobe_shake",v2);v20:ListenForEvent("spawn_shadow_wix",v6);v20:DoTaskInTime(5,v11);v20:WatchWorldState("cycles",function()v20.Light:Enable(false);end);return v20;end return Prefab("wixie_wardrobe",v12,v0,v1);